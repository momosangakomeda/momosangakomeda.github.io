<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="bootstrap.min.js"></script>
    <script type="text/javascript" src="kyureki.js"></script>
    <link href="font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="bootstrap.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">
      function htmlCalendar(year, month) {
        var html1;
        var startDay;
        var day;
        var date = new Date( year, month-1, 1);
        var monthdays = new Array( 31,28,31,30,31,30,31,31,30,31,30,31 );
        var days = new Array( "日","月","火","水","木","金","土" );
        var q; //旧暦オブジェクト
        var etoy,eto; //年の干支、日の干支
        var d;
        if(((year%4==0)&&(year%100!=0))||(year%400==0)) monthdays[1]=29;
        var thisMonthdays=monthdays[month-1];
        var qArray = new Array(thisMonthdays);

        q = new getKyureki(year,month,1);
        d = q.day;
        for(day=1; day<=thisMonthdays; day++) {
          if(d>q.daysOfMonth) {
            q = new getKyureki(year,month,day);
            d = 1;
          }
          qArray[day-1]= new kDate(q.uruu,q.month,d);
          d++;
        }

        startDay=date.getDay();
        html1 = "";
        html1 = html1 + "<table border='1' bordercolor='#666666' cellspacing='0' cellpadding='2'bgcolor='#ffffff'>";
        html1 = html1 + "<tr bgcolor='#000000'><th colspan='7'><div align=center><font color='#FFFFFF'" + year + "年 " + month + "月</th></tr>";
        html1 = html1 + "<tr bgcolor='#bbbbbb'><th><div align='center'><font color='#FF0000'>" + days[0] + "</font></th>";
        for(i=1; i < 7; i++) {
          html1 = html1 + "<th><div align='center'><font color='#000000'>" + days[i] + "</font></th>";
        }
        html1 = html1 + "</tr>";
        html1 = html1 + "<tr>";
        var col=0;
        for(i=0;i<startDay;i++){
          html1 = html1 + "<td>&nbsp;</td>";
          col++;
        }
        for(day = 1; day <= thisMonthdays; day++) {
          eto = eto_day( year,month,day);
          if(col==0){
            html1 = html1 + "<td> <div align='center'><b><font size='5' color='#FF0000'face='Arial Black'>" + day + "</font></b><br>";
          } else {
            html1 = html1 + "<td> <div align='center'><b><font size='5' color='#666666'face='Arial Black'>" + day + "</font></b><br>";
          }
          if(qArray[day-1].uruu) {
            html1 = html1 + "<font size='2' color='#000000'>閏"+qArray[day-1].month+"."+qArray[day-1].day+
                           "<font size='1' color='#000000'>"+getRokuyo(qArray[day-1].month,qArray[day-1].day)+"<br><font size='2' color='#ffffff'>";
          } else {
            html1 = html1 + "<font size='2' color='#000000'>"+qArray[day-1].month+"月"+qArray[day-1].day+
                           "<font size='2' color='#666666'>日<br></font><font size='1' color='#666666'>"+getRokuyo(qArray[day-1].month,qArray[day-1].day)+"<font color=ffffff  size=1>";
          }
          html1 = html1 + eto + "</font></div></td>";
          col++;
          if(col==7){
            html1 = html1 + "</tr><tr>";
            col=0;
          }
        }
        if(col>0) {
          for(;col<7;col++){
            html1 = html1 + "<td>&nbsp;</td>";
          }
        }
        html1 = html1 + "</table>";
        return html1;
      }


      function htmlCalendar0(y, m) {
        // 初期設定 
        var feb_date = (y%4 == 0 && y%100 != 0)?29:28;
        if(y%400 == 0){
          feb_date = 29;
        };
    
        var month_count = {1:31,2:feb_date,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31}
        var day_en = {d0:"sun",d1:"mon",d2:"the",d3:"wed",d4:"thu",d5:"fri",d6:"sat"};
        var m_display = (m<10)?"0"+String(m):m; 
        var last_day = new Date(y,m-1,month_count[m]).getDay();
        var first_day = new Date(y,m-1,1).getDay();
        var w = 1;
        var d = first_day;
        // マークアップ生成
        var txt = "";
        txt += '<p>' + y + '年' + m_display + '月</p>';
        txt += '<table summary="' + y + '年' + m_display + '月のカレンダー" class="table table-bordered calendar month' + m + '">';
        txt += '<tr>';
        txt += '<th>日</th>';
        txt += '<th>月</th>';
        txt += '<th>火</th>';
        txt += '<th>水</th>';
        txt += '<th>木</th>';
        txt += '<th>金</th>';
        txt += '<th>土</th>';
        txt += '</tr>';
        txt += '<tr class="week1">';
        for(var j=0;j<first_day;j++){
          txt += '<td>&nbsp;</td>';
        }
        for(var i=1;i<=month_count[m];i++){
          if(d != 0 && (first_day + i)%7 == 1){
            w++;
            d = 0;
            txt += '</tr>'; 
            txt += '<tr class="week' + w + '">';
          }
          var i_display = (i<10)?"0"+String(i):i;
          day_count = (i%7 == 0)? Math.floor(i/7) : Math.floor(i/7) + 1 ;
          txt += '<td id="d' + y + m_display + i_display + '" class="' + day_en['d'+d] + day_count + ' date' + i + '">' + i + '</td>';
          d++;
        }
        for(var j=0;j<(6-last_day);j++){
          txt += '<td>&nbsp;</td>\n';
        }
        txt += '</tr>';
        txt += '</table>';

        return txt;
      }

      $(function(){
        $("#pre").click(function(){
          alert("pre!");
        });
        $("#next").click(function(){
          alert("next!");
        });
        
        // 取得したい年月設定（とりあえずPC時間の今日の年月）
        var y = new Date().getFullYear();
        var m = new Date().getMonth()+1;

        var html1 = htmlCalendar(y, m);
        $("#tag").html(html1);

      });
    </script>
    <style type="text/css">
      .month1 .date1,/* 元日 */
      .month1 .mon2,/* 成人の日 */
      .month2 .date11,/* 建国記念の日 */
      .month4 .date4,/* iwasborn */
      .month4 .date29,/* 昭和の日 */
      .month5 .date3,/* 憲法記念日 */
      .month5 .date4,/* みどりの日 */
      .month5 .date5,/* こども日 */
      .month7 .mon3,/* 海の日 */
      .month9 .mon3,/* 敬老の日 */
      .month10 .mon2,/* 体育の日 */
      .month11 .date3,/* 文化の日 */
      .month11 .date23,/* 勤労感謝の日 */
      .month12 .date23,/* 天皇誕生日 */
      #d20110321,/* 春分の日（年によって異なる 20日 - 21日） */
      #d20110923,/* 秋分の日（年によって異なる 20日 - 24日） */
      .sun1,
      .sun2,
      .sun3,
      .sun4,
      .sun5{background:#ccf;color:#fff;}
    </style>
    </head>
    <body>
        <div class="cover">
            <div class="navbar">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#"><span>Brand</span></a>
                    </div>
                    <div class="collapse navbar-collapse" id="navbar-ex-collapse">
                        <ul class="nav navbar-nav navbar-right">
                            <li>
                                <a href=‘login.html’>ログイン画面</a>
                                <a href=‘input.html’>入力画面</a>
                                <a href=‘#’>カレンダー</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <p>とりあえず7月のカレンダー出力</p>
                    <span id = "tag"></span>
                    <button id="pre" class="btn btn-xs btn-primary">PREVIOUS </button>
                    <button id="next" class="btn btn-xs btn-primary">NEXT</button>
                </div>
           </div>
    </body>
</html>
